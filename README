
  ...   tvtime!

  tvtime is the start of my realtime video4linux deinterlacer.
Currently, tvtime attempts to mimic the behavior of a cheap TV, and once
I'm happy with the performance there, I can start enabling more
expensive deinterlacing algorithms to improve the visual quality.
Getting high framerates using X's Xv drivers and the Linux bttv driver
has proven enough of a challenge for now.

  tvtime currently grabs frames of video and draws each field
independently to the screen, using linear interpolation on the missing
scanlines.  Each field is shown at the correct time, and we assume the
frames from the video4linux device are always top-field-first.

  I'm using the original video4linux API (i.e., not v4l2).  This only
enables me to get an interrupt once every frame, and not every field, so
I have to use /dev/rtc to sleep until the time for the second field
arrives to blit it.  This is really unfortunate, and hopefully with v4l2
I can get an interrupt every field to fix this.  I plan to try that out
soon.

  I would appreciate any comments you have.  The source code is
reasonably documented, so please take a look if you're curious.

  - Billy Biggs <vektor@dumbterm.net>
    Sat Dec 15 22:01:30 EST 2001


  Using tvtime

usage: ./tvtime [-aps] [-w <width>] [-o <mode>] [-d <device> [-i <input>]
	-p	PAL mode.
	-a	16:9 mode.
	-s	Sync to VGA (experimental and dangerous).
	-w	Output window width, defaults to 800.
	-o	Output mode: '422' (default) or '420'.
	-d	video4linux device (defaults to /dev/video0).
	-i	video4linux input number (defaults to 0).

	See the README for more details.

  I don't do any tuning or anything like that, so you'll need to set
your channel using xawtv or similar if you're taking input from the
tuner.  In 16:9 mode we stretch the output (for full resolution from
widescreen DVDs).  The output width parameter is for the output window,
the height is determined by the aspect ratio.

  VGA syncing is kinda weird, it's just that I'll wait for the retrace
to finish before starting to blit the frame, but if your Xv driver is
double buffering this won't matter.  It's basically just to test around
with my crappy Matrox g400 (the open source Xv driver for this card is
useless).

  Someone noted that if you have a few number of kernel buffers for your
bttv card, then they had problems.  I could not reproduce it.  I use
'modprobe bttv gbuffers=8' but even using 2 buffers seemed fine for me.
Using a large number (like 8) may suck since the audio sync may be too
off.  Let me know if you have problems.

